<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Catch Zone - 포즈 인식 게임</title>
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body>
    <div class="container">
      <!-- 헤더 -->
      <header>
        <h1>🎮 Catch Zone</h1>
        <p class="subtitle">포즈 인식으로 과일을 받아요!</p>
      </header>

      <!-- 컨트롤 버튼 -->
      <div class="button-container">
        <button type="button" id="startBtn" onclick="init()">Start</button>
        <button type="button" id="stopBtn" onclick="stop()" disabled>Stop</button>
      </div>

      <!-- 게임 정보 -->
      <div class="game-info">
        <div class="info-item">
          <span class="info-label">점수</span>
          <span class="info-value" id="score">0</span>
        </div>
        <div class="info-item">
          <span class="info-label">레벨</span>
          <span class="info-value" id="level">1</span>
        </div>
        <div class="info-item">
          <span class="info-label">시간</span>
          <span class="info-value" id="time-remaining">20</span>
        </div>
        <div class="info-item">
          <span class="info-label">미스</span>
          <span class="info-value" id="miss-count">0 / 2</span>
        </div>
      </div>

      <!-- 메인 게임 영역 -->
      <div class="main-content">
        <!-- 왼쪽: 웹캠 및 포즈 인식 -->
        <div class="pose-section">
          <div class="canvas-container">
            <canvas id="canvas"></canvas>
            <div id="max-prediction">대기 중...</div>
          </div>
          <div id="label-container"></div>
        </div>

        <!-- 오른쪽: 게임 화면 -->
        <div class="game-section">
          <div id="game-area">
            <!-- 3개 구역 -->
            <div class="zone" data-zone="LEFT">
              <span class="zone-label">LEFT</span>
            </div>
            <div class="zone" data-zone="CENTER">
              <span class="zone-label">CENTER</span>
            </div>
            <div class="zone" data-zone="RIGHT">
              <span class="zone-label">RIGHT</span>
            </div>

            <!-- 바구니 -->
            <div class="baskets">
              <div class="basket" data-zone="LEFT">🧺</div>
              <div class="basket active" data-zone="CENTER">🧺</div>
              <div class="basket" data-zone="RIGHT">🧺</div>
            </div>

            <!-- 아이템은 JS에서 동적으로 추가됨 -->
          </div>

          <!-- 피드백 메시지 -->
          <div id="feedback" class="feedback" style="display: none;"></div>
          <div id="notification" class="notification" style="display: none;"></div>
        </div>
      </div>

      <!-- 게임 설명 -->
      <div class="instructions">
        <h3>🎯 게임 방법</h3>
        <ul>
          <li><strong>왼쪽</strong> 포즈 → LEFT 구역으로 바구니 이동</li>
          <li><strong>정면</strong> 포즈 → CENTER 구역으로 바구니 이동</li>
          <li><strong>오른쪽</strong> 포즈 → RIGHT 구역으로 바구니 이동</li>
          <li>🍎 사과 +100점 | 🍐 배 +150점 | 🍊 오렌지 +200점</li>
          <li>💣 폭탄을 받으면 게임 오버!</li>
          <li>과일을 2번 놓치면 게임 오버!</li>
        </ul>
      </div>
    </div>

    <!-- Teachable Machine 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@0.8/dist/teachablemachine-pose.min.js"></script>

    <!-- 애플리케이션 모듈 -->
    <script src="./js/stabilizer.js"></script>
    <script src="./js/poseEngine.js"></script>
    <script src="./js/gameEngine.js"></script>
    <script src="./js/main.js"></script>
  </body>
</html>
